<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rare Amy Winehouse Photos | recfr.xyz</title>
    <style>
        /* [Previous CSS styles remain exactly the same] */
    </style>
</head>
<body>
    <!-- [Previous HTML structure remains the same until the script section] -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Video background functionality
            const video = document.querySelector('video');
            video.play().catch(function(e) {
                console.log("Autoplay prevented, trying to force play");
                video.muted = true;
                video.play();
            });
            
            video.addEventListener('pause', function() {
                this.play();
            });
            
            video.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });

            // Hamburger menu functionality
            const hamburger = document.getElementById('hamburger');
            const menu = document.getElementById('menu');

            hamburger.addEventListener('click', function() {
                this.classList.toggle('active');
                menu.classList.toggle('active');
            });

            const menuLinks = document.querySelectorAll('.menu a');
            menuLinks.forEach(function(link) {
                link.addEventListener('click', function() {
                    hamburger.classList.remove('active');
                    menu.classList.remove('active');
                });
            });

            // Gallery functionality
            const photoBook = document.getElementById('photoBook');
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightboxImg');
            const lightboxCaption = document.getElementById('lightboxCaption');
            const lightboxClose = document.getElementById('lightboxClose');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            let photos = [];
            let currentPhotoIndex = 0;

            // Fetch photo list
            fetch('https://recfr.xyz/file_list.txt')
                .then(function(response) {
                    return response.text();
                })
                .then(function(text) {
                    const fileNames = text.split('\n').filter(function(name) {
                        return name.trim() !== '';
                    });
                    photos = fileNames.map(function(name) {
                        return 'https://recfr.xyz/AWF/' + name.trim();
                    });
                    
                    // Create photo elements
                    photoBook.innerHTML = '';
                    photos.forEach(function(photoUrl, index) {
                        const photoContainer = document.createElement('div');
                        photoContainer.className = 'photo-container';
                        photoContainer.innerHTML = [
                            '<img class="photo" src="' + photoUrl + '" alt="Amy Winehouse photo ' + (index + 1) + '" loading="lazy">',
                            '<div class="photo-info">',
                            '<div class="photo-date">Circa ' + (Math.floor(Math.random() * (2011 - 2003) + 2003)) + '</div>',
                            '</div>'
                        ].join('');
                        
                        photoContainer.addEventListener('click', function() {
                            openLightbox(index);
                        });
                        photoBook.appendChild(photoContainer);
                    });
                })
                .catch(function(error) {
                    console.error('Error loading photos:', error);
                    photoBook.innerHTML = '<div class="loading">Error loading photos. Please try again later.</div>';
                });

            // Lightbox functions
            function openLightbox(index) {
                currentPhotoIndex = index;
                lightboxImg.src = photos[index];
                lightboxCaption.textContent = 'Amy Winehouse, circa ' + (Math.floor(Math.random() * (2011 - 2003) + 2003));
                lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }

            function navigatePhotos(direction) {
                currentPhotoIndex += direction;
                if (currentPhotoIndex < 0) currentPhotoIndex = photos.length - 1;
                if (currentPhotoIndex >= photos.length) currentPhotoIndex = 0;
                openLightbox(currentPhotoIndex);
            }

            // Event listeners
            lightboxClose.addEventListener('click', closeLightbox);
            prevBtn.addEventListener('click', function() {
                navigatePhotos(-1);
            });
            nextBtn.addEventListener('click', function() {
                navigatePhotos(1);
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    navigatePhotos(-1);
                } else if (e.key === 'ArrowRight') {
                    navigatePhotos(1);
                }
            });

            // Close lightbox when clicking outside image
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });
        });
    </script>
</body>
</html>
